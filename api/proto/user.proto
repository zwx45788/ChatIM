syntax = "proto3";

package user;

option go_package = "github.com/your-username/your-project/api/proto/user";

service UserService {
  rpc GetUserByID (GetUserRequest) returns (GetUserResponse) {}
  rpc CreateUser (CreateUserRequest) returns (CreateUserResponse);
  rpc Login (LoginRequest) returns (LoginResponse); // ğŸ‘ˆ æ–°å¢ç™»å½•æ–¹æ³•
  rpc GetCurrentUser (GetCurrentUserRequest) returns (GetCurrentUserResponse);
  rpc CheckUserOnline (CheckUserOnlineRequest) returns (CheckUserOnlineResponse);
}

message GetUserRequest {
  string id = 1;
}

message GetUserResponse {
  string id = 1;
  string username = 2;
  string nickname = 3;
}

message CreateUserRequest {
  string username = 1;
  string password = 2;
  string nickname = 3;
}

message CreateUserResponse {
  int32 code = 1;
  string message = 2;
  string user_id = 3;
}

// ğŸ‘‡ æ–°å¢çš„ç™»å½•ç›¸å…³æ¶ˆæ¯
message LoginRequest {
  string username = 1;
  string password = 2;
}

message LoginResponse {
  int32 code = 1;        // 0 æˆåŠŸ, -1 å¤±è´¥
  string message = 2;     // æç¤ºä¿¡æ¯
  string token = 3;      // JWT Token, å¦‚æœæˆåŠŸ
}
message GetCurrentUserRequest {
}

message GetCurrentUserResponse {
  int32 code = 1;
  string message = 2;
  string user_id = 3;
  string username = 4;
  string nickname = 5;
}
message CheckUserOnlineRequest {
  string user_id = 1;
}

// ğŸ‘‡ æ–°å¢å¯¹åº”çš„å“åº”
message CheckUserOnlineResponse {
  int32 code = 1;
  string message = 2;
  bool is_online = 3; // æ ¸å¿ƒä¿¡æ¯ï¼šæ˜¯å¦åœ¨çº¿
}
